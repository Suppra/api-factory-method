# Diagrama UML - Patrones Factory Method y Abstract Factory

## Diagrama de Clases Esquemático

### 1. Patrón Factory Method (Implementación Original)

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                             FACTORY METHOD PATTERN                           │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│    ┌─────────────────┐                    ┌─────────────────┐               │
│    │   <<Static>>    │                    │  <<Interface>>  │               │
│    │   VMFactory     │ ────creates───────▶│    Provider     │               │
│    │─────────────────│                    │─────────────────│               │
│    │ +get_provider() │                    │ +create_vm()    │               │
│    │ +register()     │                    └─────────────────┘               │
│    └─────────────────┘                             △                        │
│                                                    │                        │
│                                                    │ implements             │
│         ┌──────────────┬──────────────┬──────────────┬──────────────┐       │
│         │              │              │              │              │       │
│    ┌─────────┐   ┌─────────┐   ┌─────────┐   ┌─────────────┐        │       │
│    │   AWS   │   │  Azure  │   │   GCP   │   │ OnPremise   │        │       │
│    │Provider │   │Provider │   │Provider │   │ Provider    │        │       │
│    └─────────┘   └─────────┘   └─────────┘   └─────────────┘        │       │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 2. Patrón Abstract Factory (Nueva Implementación)

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                           ABSTRACT FACTORY PATTERN                           │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│ ┌──────────────────────────┐                                                │
│ │     <<Abstract>>         │                                                │
│ │ CloudResourceFactory     │                                                │
│ │──────────────────────────│                                                │
│ │ +create_network()        │                                                │
│ │ +create_storage()        │                                                │
│ │ +create_vm()            │                                                │
│ │ +get_provider_name()     │                                                │
│ └──────────────────────────┘                                                │
│              △                                                              │
│              │ implements                                                   │
│     ┌────────┼────────┬─────────────┬─────────────┐                        │
│     │        │        │             │             │                        │
│ ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────────┐                        │
│ │   AWS   │ │  Azure  │ │   GCP   │ │ OnPremise   │                        │
│ │Resource │ │Resource │ │Resource │ │ Resource    │                        │
│ │Factory  │ │Factory  │ │Factory  │ │ Factory     │                        │
│ └─────────┘ └─────────┘ └─────────┘ └─────────────┘                        │
│      │           │           │             │                               │
│      │creates    │creates    │creates      │creates                        │
│      ▼           ▼           ▼             ▼                               │
│ ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────────┐                        │
│ │   AWS   │ │  Azure  │ │   GCP   │ │ OnPremise   │                        │
│ │Family   │ │Family   │ │Family   │ │ Family      │                        │
│ └─────────┘ └─────────┘ └─────────┘ └─────────────┘                        │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 3. Jerarquía de Productos (Resources)

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                            PRODUCT HIERARCHIES                               │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│ ┌───────────────┐    ┌───────────────┐    ┌───────────────┐                │
│ │ <<Abstract>>  │    │ <<Abstract>>  │    │ <<Abstract>>  │                │
│ │NetworkResource│    │StorageResource│    │  VMResource   │                │
│ │───────────────│    │───────────────│    │───────────────│                │
│ │+create_network│    │+create_storage│    │ +create_vm()  │                │
│ │+get_info()    │    │+get_info()    │    │ +get_info()   │                │
│ └───────────────┘    └───────────────┘    └───────────────┘                │
│         △                     △                     △                       │
│         │ implements          │ implements          │ implements            │
│    ┌────┼────┐           ┌────┼────┐           ┌────┼────┐                  │
│    │    │    │           │    │    │           │    │    │                  │
│ ┌─────┐ ... ┌─────┐   ┌─────┐ ... ┌─────┐   ┌─────┐ ... ┌─────┐             │
│ │ AWS │     │ On- │   │ AWS │     │ On- │   │ AWS │     │ On- │             │
│ │Net- │     │Prem │   │Stor-│     │Prem │   │ VM  │     │Prem │             │
│ │work │     │Net  │   │age  │     │Stor │   │     │     │ VM  │             │
│ └─────┘     └─────┘   └─────┘     └─────┘   └─────┘     └─────┘             │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

## Diagrama de Secuencia - Aprovisionamiento de Familia de Recursos

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                    SEQUENCE DIAGRAM - RESOURCE FAMILY                        │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│ Cliente    API    ResourceProvisioning   FactoryRegistry   AWSFactory       │
│    │        │             │                    │              │             │
│    │ POST   │             │                    │              │             │
│    │───────▶│             │                    │              │             │
│    │        │ provision() │                    │              │             │
│    │        │────────────▶│                    │              │             │
│    │        │             │ get_factory("aws") │              │             │
│    │        │             │───────────────────▶│              │             │
│    │        │             │    AWSFactory      │              │             │
│    │        │             │◀───────────────────│              │             │
│    │        │             │                    │              │             │
│    │        │             │ create_network()   │              │             │
│    │        │             │───────────────────────────────────▶│             │
│    │        │             │     AWSNetwork     │              │             │
│    │        │             │◀───────────────────────────────────│             │
│    │        │             │                    │              │             │
│    │        │             │ create_storage()   │              │             │
│    │        │             │───────────────────────────────────▶│             │
│    │        │             │     AWSStorage     │              │             │
│    │        │             │◀───────────────────────────────────│             │
│    │        │             │                    │              │             │
│    │        │             │ create_vm()        │              │             │
│    │        │             │───────────────────────────────────▶│             │
│    │        │             │       AWSVM        │              │             │
│    │        │             │◀───────────────────────────────────│             │
│    │        │   Response  │                    │              │             │
│    │        │◀────────────│                    │              │             │
│    │ JSON   │             │                    │              │             │
│    │◀───────│             │                    │              │             │
│    │        │             │                    │              │             │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

## Arquitectura Completa del Sistema

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                            SYSTEM ARCHITECTURE                               │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│                          ┌─────────────────┐                               │
│                          │   FastAPI       │                               │
│                          │   Controller    │                               │
│                          │─────────────────│                               │
│                          │ /provision_vm   │                               │
│                          │ /provision_     │                               │
│                          │  resource_family│                               │
│                          └─────────────────┘                               │
│                                   │                                        │
│                          ┌────────┴────────┐                              │
│                          │                 │                              │
│             ┌─────────────▼──┐   ┌─────────▼──────────┐                    │
│             │   VMFactory    │   │ResourceProvisioning│                    │
│             │ (Factory       │   │     Service        │                    │
│             │  Method)       │   │ (Abstract Factory) │                    │
│             └────────────────┘   └────────────────────┘                    │
│                       │                       │                           │
│                       │              ┌────────▼────────┐                   │
│                       │              │AbstractFactory  │                   │
│                       │              │   Registry      │                   │
│                       │              │─────────────────│                   │
│                       │              │ +get_factory()  │                   │
│                       │              └─────────────────┘                   │
│                       │                       │                           │
│          ┌────────────▼────────────┐         │                           │
│          │                        │         │                           │
│    ┌─────▼─────┐ ┌─────▼─────┐ ┌──▼─▼───┐ ┌─▼─────────┐                  │
│    │    AWS    │ │   Azure   │ │  GCP   │ │OnPremise  │                  │
│    │ Provider  │ │ Provider  │ │Provider│ │ Provider  │                  │
│    │(Original) │ │(Original) │ │(Origin)│ │(Original) │                  │
│    └───────────┘ └───────────┘ └────────┘ └───────────┘                  │
│                                                                           │
│    ┌───────────┐ ┌───────────┐ ┌────────┐ ┌───────────┐                  │
│    │    AWS    │ │   Azure   │ │  GCP   │ │OnPremise  │                  │
│    │ Resource  │ │ Resource  │ │Resource│ │ Resource  │                  │
│    │ Factory   │ │ Factory   │ │Factory │ │ Factory   │                  │
│    │(Abstract) │ │(Abstract) │ │(Abstr) │ │(Abstract) │                  │
│    └─────┬─────┘ └─────┬─────┘ └───┬────┘ └─────┬─────┘                  │
│          │             │           │            │                        │
│    ┌─────▼─────┐ ┌─────▼─────┐ ┌───▼────┐ ┌─────▼─────┐                  │
│    │ Network   │ │ Network   │ │Network │ │ Network   │                  │
│    │ Storage   │ │ Storage   │ │Storage │ │ Storage   │                  │
│    │    VM     │ │    VM     │ │   VM   │ │    VM     │                  │
│    └───────────┘ └───────────┘ └────────┘ └───────────┘                  │
│                                                                           │
└─────────────────────────────────────────────────────────────────────────────┘
```

## Flujo de Datos - Familia de Recursos AWS

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                              DATA FLOW - AWS FAMILY                          │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│ ┌─────────────────┐                                                         │
│ │   REQUEST       │                                                         │
│ │─────────────────│                                                         │
│ │provider: "aws"  │                                                         │
│ │vm_params: {...} │                                                         │
│ │network_params:  │                                                         │
│ │  vpcId, subnet  │                                                         │
│ │storage_params:  │                                                         │
│ │  volumeType,    │                                                         │
│ │  sizeGB         │                                                         │
│ └─────────────────┘                                                         │
│          │                                                                  │
│          ▼                                                                  │
│ ┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐           │
│ │  AWSNetwork     │    │  AWSStorage     │    │     AWSVM       │           │
│ │─────────────────│    │─────────────────│    │─────────────────│           │
│ │creates network  │───▶│creates storage  │───▶│creates VM with  │           │
│ │returns:         │    │returns:         │    │network + storage│           │
│ │aws-network-123  │    │aws-storage-456  │    │returns:         │           │
│ └─────────────────┘    └─────────────────┘    │aws-vm-789       │           │
│                                               └─────────────────┘           │
│                                                        │                    │
│                                                        ▼                    │
│ ┌─────────────────────────────────────────────────────────────────────────┐ │
│ │                           RESPONSE                                      │ │
│ │─────────────────────────────────────────────────────────────────────────│ │
│ │ success: true                                                           │ │
│ │ provider: "AWS"                                                         │ │
│ │ resources: [                                                            │ │
│ │   {resource_id: "aws-network-123", type: "network", status: "ok"},      │ │
│ │   {resource_id: "aws-storage-456", type: "storage", status: "ok"},      │ │
│ │   {resource_id: "aws-vm-789", type: "vm", status: "ok"}                 │ │
│ │ ]                                                                       │ │
│ └─────────────────────────────────────────────────────────────────────────┘ │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```